{% extends 'shop/base.html' %}

{% block title %} {{product.product_name}} - Awesome Cart {% endblock title %}


{% block body %}

<div class="container my-5">

    <div class="row">
        <div class="col-md-4">
            <img src="/media/{{product.image}}" alt="" width="350px" height="350px">

        </div>

        

        <div class="col-md-8 my-5">
            <h2>{{product.product_name}}</h2>
            <h3 class="text-danger"><b>Rs. {{product.price}}</b></h3>
            <p>{{product.desc}}</p>
            <button class="btn btn-primary m-2">Add to Cart</button>

        </div>

    </div>

</div>



{% endblock body %}



<!-- JS Block -->
{% block js %} 

<script>
  
  
  if(localStorage.getItem('cart') == null){
    var cart = {};
  }

  else {
    cart = JSON.parse(localStorage.getItem('cart'));
    document.getElementById('cart').innerHTML = Object.keys(cart).length;
  }


$('.cart').click(function(){

  var idstr = this.id.toString();
  console.log(idstr);
  if (cart[idstr] != undefined){
    cart[idstr] = cart[idstr] + 1;
  }
  else{
    cart[idstr] = 1;
  }

  console.log(cart)
  localStorage.setItem('cart', JSON.stringify(cart));
  document.getElementById('cart').innerHTML = Object.keys(cart).length;
  
});

$('#popcart').popover(); 
document.getElementById("popcart").setAttribute('data-content', '<h6>Cart for items in my shopping cart</h6>'); 
 
</script>

{% endblock %}   